<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Sentry Health - ShopUp</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/storefront-styles.css">

  <!-- Sentry loader + centralized config -->
  <script src="https://js-de.sentry-cdn.com/c4c92ac8539373f9c497ba50f31a9900.min.js" crossorigin="anonymous"></script>
  <script src="js/sentry-config.js"></script>

  <style>
    body{font-family:system-ui,Segoe UI,Roboto,Arial;margin:40px;max-width:800px}
    button{padding:12px 16px;border:0;border-radius:10px;cursor:pointer}
    .ok{background:#16a34a;color:#fff}
    .warn{background:#f59e0b;color:#111}
    .card{padding:18px;border:1px solid #e5e7eb;border-radius:12px;margin-top:18px}
    code{background:#f3f4f6;padding:2px 6px;border-radius:8px}
  </style>
</head>
<body>
  <h1>Sentry Health Check</h1>
  <p>This page helps you confirm Sentry is working on production.</p>

  <div class="card">
    <p><strong>Status:</strong> <span id="status">Checkingâ€¦</span></p>
    <p><strong>Host:</strong> <code id="host"></code></p>
    <button class="ok" id="sendTest">Send Test Event</button>
    <button class="warn" id="throwError">Throw Test Error</button>
    <p id="result" style="margin-top:12px;"></p>
  </div>

  <script>
    document.getElementById("host").textContent = location.hostname;

    const sentryReady = typeof window.Sentry !== "undefined";
    document.getElementById("status").textContent =
      sentryReady ? "Sentry Loaded (check config rules)" : "Sentry NOT loaded";

    document.getElementById("sendTest").onclick = () => {
      if (!window.Sentry) return alert("Sentry not loaded.");
      window.Sentry.captureMessage("âœ… ShopUp Sentry Health Test", { level: "info" });
      document.getElementById("result").textContent =
        "Sent: Test message. Check Sentry â†’ Issues / Events.";
    };

    document.getElementById("throwError").onclick = () => {
      if (!window.Sentry) return alert("Sentry not loaded.");
      try {
        throw new Error("ðŸ§ª ShopUp Test Error (safe to ignore)");
      } catch (e) {
        window.Sentry.captureException(e);
        document.getElementById("result").textContent =
          "Sent: Test error. Check Sentry â†’ Issues.";
      }
    };
  </script>
</body>
</html>
